<html>
  <head>
    <title>Upload Page</title>
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/index.css">
  </head>

  <body>
    <%- include("partials/header") %>

      <div class="welcome-banner">
        <h2>üëã Let's upload something <%= user.username|| user.email || user.id %>!</h2>
      </div>

      <% if (uploadSuccess) { %>
        <div class="login-error" style="background-color:#eaf8f2;color:#1b7c54;border-color:#b6dec8;">
          ‚úÖ File uploaded successfully.
        </div>
      <% } %>

      <section class="upload-section">
        <form action="/upload" method="POST" enctype="multipart/form-data" class="upload-form">
          <input type="file" name="file" required>
          <button type="submit">Upload</button>
        </form>
      </section>

      <% if (files && files.length) { %>
        <section class="upload-section upload-list">
          <h3>Your uploads</h3>
          <table width="100%">
            <thead class="header">
              <tr>
                <th class="download">Action</th>
                <th class="file_name">File name</th>
                <th class="type">Type</th>
                <th class="size">Size</th>
                <th class="added">Added</th>
              </tr>
            </thead>
            <tbody>
              <% files.forEach(file => { %>
                <tr>
                  <td class="action-cell-content">
                    <a href="/download/<%= file.id %>" class="download-action" title="Download">‚¨áÔ∏è</a>
                    <form action="/delete/<%= file.id %>" method="POST" class="inline-action">
                      <button type="submit" class="delete-action" onclick="return confirm('Delete file?')" title="Delete">‚úñ</button>
                    </form>
                  </td>
                  <td><%= file.filename %></td>
                  <td><%= file.type %></td>
                  <td><%= file.displaySize || '‚Äî' %></td>
                  <td>
                    <%= file.addedAt
                      ? file.addedAt.toLocaleString('fr-FR', {
                          day: '2-digit',
                          month: '2-digit',
                          year: 'numeric',
                          hour: '2-digit',
                          minute: '2-digit'
                        })
                      : '‚Äî' %>
                  </td>
                </tr>
              <% }) %>
            </tbody>
          </table>
        </section>
      <% } %>
     
      
  </body>
</html>
